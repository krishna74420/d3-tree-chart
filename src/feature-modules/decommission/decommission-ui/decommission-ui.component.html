<div class="decommission-shell">
  <header class="header">Decommissioning AIT</header>

  <div class="decommission-grid">
    <aside class="left-steps" role="navigation" aria-label="Decommission steps">
      <ul>
        <li *ngFor="let step of steps; let i = index" (click)="goToStep.emit(i)" [class.active]="i === currentStep">
          <div class="step-item">
            <div class="dot" [ngClass]="{'dot-completed': stepCompleted(i), 'dot-current': i===currentStep, 'dot-pending': !stepCompleted(i) && i!==currentStep}"></div>
            <div class="step-label">{{ step.label }}</div>
          </div>
        </li>
      </ul>
    </aside>

    <main class="form-area">
      <div class="form-card">
        <div class="form-header">
          <div class="form-title">{{ steps[currentStep]?.label }}</div>
          <div class="step-count">Step {{ currentStep + 1 }} of {{ totalSteps }}</div>
        </div>

        <p class="subtitle">Please fill in all required fields</p>

        <formly-form [fields]="fields" [model]="localModel" (modelChange)="onModelChange($event)"></formly-form>

        <div class="actions">
          <button mat-button (click)="prevStep.emit()">Back</button>
          <button mat-raised-button color="primary" (click)="nextStep.emit()">Next</button>
        </div>
      </div>
    </main>
  </div>
</div>
